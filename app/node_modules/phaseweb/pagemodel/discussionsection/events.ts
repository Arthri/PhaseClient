import Client from "phaseweb/client";
import ElementIdentifiers from "phaseweb/elementidentifiers";
import DiscussionSection from "phaseweb/pagemodel/discussionsection";
import * as $ from "jquery";

class DiscussionSectionEvents {
    private _discussionSection: DiscussionSection;
    private _client: Client;

    constructor(discussionSection: DiscussionSection, client: Client) {
        this._discussionSection = discussionSection;
        this._client = client;
        this.registerDiscussionListClick();
    }

    /**
     * Registers a click on a discussion list element for switching discussions
     */
    private registerDiscussionListClick(): void {
        const self = this;
        $(ElementIdentifiers.DiscussionSection.list).on("mousedown", ElementIdentifiers.DiscussionSection.discussion, function() {
            self._client.switchDiscussion(+$(this).attr("id").substr(4));
        });
    }
}

export default DiscussionSectionEvents;
