import Client from 'phase/client';
import Message from 'phase/message';

export default function ChatMessage(client: Client, message: Message) {
    console.time("a");
    let accountName = message.getGuestname().getContent().length > 0 && message.getUsername().getContent().length > 0 ? message.getUsername() : '';
    return `
    <li>
        <div class="chat-message-avatar">
            <img class="avatar_${message.getUserId()}" src="${message.getAvatar()}">
        </div>
        <div class="chat-message-right">
            <span class="chat-message-info">`
                +`<span class="chat-name" title="${accountName}">${message.getDisplayName().getContentWithHtmlEscaped()}</span>`
                +`${(message.getSystemName() != client.getSystemName() && message.getSystemName() !== null ? `<span class="systemSuffix">@${message.getSystemName()}</span>` : ``)}`
                +`<span class="chat-timestamp">${message.getFormattedTimestamp()}</span>`
                +`${(message.getTag().length > 0 ? `<span style="margin-left: 5px; color: ${message.getTagColour()}">${message.getTag()}</span>` : ``)}`
            +`</span>`
            +`<span class="chat-message-content">${message.getContentStyled()}</span>`
        +`</div>
        <div style="clear: both; content: ' '; height: 0"></div>
    </li>`;
}